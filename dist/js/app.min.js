function err(err){console.err("err",err)}angular.module("myApp.controllers",[]).controller("mainCtrl",["$scope",function($scope){}]).controller("wantedCtrl",["$scope","spSheet",function($scope,spSheet){spSheet("1",function(feed){$scope.feed=feed},err)}]).controller("askCtrl",["$scope","$routeParams","spSheet",function($scope,$routeParams,spSheet){spSheet("2",function(feed){for(var i=0;i<feed.length;i++){result=[],feed[i].id==$routeParams.tab&&(fed=feed[i]);for(var key in feed[i])key.startsWith("img")&&(result.push(feed[i][key]),delete feed[i][key]);result&&(feed[i].img=result)}$scope.feed=feed,fed&&($scope.fed=fed)},err),$scope.changePage=function(page){console.log(page)},$scope.isActive=function(item){var active="/"+item.id===$routeParams.tab;return active},$scope.id=$routeParams.tab}]).controller("worksCtrl",["$scope","$sce","spSheet",function($scope,$sce,spSheet){spSheet("3",function(feed){for(var i=0;i<feed.length;i++)feed[i].link=$sce.trustAsResourceUrl(feed[i].link);$scope.feed=feed},err)}]).controller("workersCtrl",["$scope","spSheet",function($sp,spSheet){spSheet("4",function(feed){$sp.feed=feed},console.err)}]).controller("questionCtrl",["$scope","spSheet",function($sp,spSheet){spSheet("5",function(feed){$sp.feed=feed},console.err)}]),angular.module("myApp.directives",[]).directive("menubar",["$location",function($location){var datas={logo:{img:"img/logo.png",href:"/"},items:[{name:"工人招募",href:"/wanted"},{name:"工人介紹",href:"/workers"},{name:"討論串",href:"/ask"},{name:"作品集",href:"/works"},{name:"問與答",href:"/question"}],isActive:function(item){return $location.path().startsWith(item.href)}};return window.datas=datas,{templateUrl:"partial/widgets/menu.html",link:function(scope,element,attr){for(var data in datas)scope[data]=datas[data]}}}]);var skateApp=angular.module("skateFlameApp",["ngRoute","ngDisqus","ui.materialize","facebook","myApp.controllers","myApp.directives","myApp.services"]);skateApp.config(["$routeProvider","$locationProvider","$disqusProvider","FacebookProvider",function($routeProvider,$locationProvider,$disqusProvider,FbPvidr){$routeProvider.when("/",{controller:"mainCtrl",templateUrl:"partial/main.html"}).when("/wanted",{controller:"wantedCtrl",templateUrl:"partial/wanted.html"}).when("/ask",{redirectTo:"/ask/1"}).when("/ask/:tab",{controller:"askCtrl",templateUrl:"partial/ask.html"}).when("/works",{controller:"worksCtrl",templateUrl:"partial/works.html"}).when("/workers",{controller:"workersCtrl",templateUrl:"partial/workers.html"}).when("/question",{controller:"questionCtrl",templateUrl:"partial/question.html"}).otherwise({redirectTo:"/"}),$locationProvider.hashPrefix("!"),$disqusProvider.setShortname("skateFlame"),FbPvidr.init("631891993630750")}]),skateApp.run(["$rootScope","$window","$location",function($rootScope,$window,$ln){$("img#justfont-badge").css("display","none"),$rootScope["goto"]=function(path){$ln.path(path)},$rootScope.$on("$viewContentLoaded",function(){setTimeout(function(){$("#main-loader").fadeOut()},1e3)})}]),angular.module("myApp.services",[]).factory("spSheet",["$http",function($http){var key="1w9vTUKWXdQoz5oaDBlhIVcCst8knaGzsAcKBhYSsZr0",spSheet=function(feed,callbackSucess,callbackError){url="https://spreadsheets.google.com/feeds/list/"+key+"/"+feed+"/public/values?alt=json",$http.get(url).then(function(data){for(var keyPrefix="gsx$",info="$t",entry=data.data.feed.entry,data=[],i=0;i<entry.length;i++){data[i]={};for(var key in entry[i])key.startsWith(keyPrefix)&&(data[i][key.replace(keyPrefix,"")]=entry[i][key][info])}callbackSucess(data)},callbackError)};return spSheet}]);
//# sourceMappingURL=app.min.js.map